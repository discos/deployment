#!/usr/bin/env python
"""Some command line examples:

  $ discos-vms start manager
  $ discos-vms restart console
  $ discos-vms stop storage
"""
from __future__ import print_function
import utils
from argparse import ArgumentParser

utils.checkPython()

machines = utils.machineList()

parser = ArgumentParser()
parser.add_argument('action', choices=['status', 'start', 'stop', 'restart'])
parser.add_argument('machine', choices=machines)
args = parser.parse_args()

if args.action == 'status':
    status_msg = 'Machine {} status: '.format(args.machine)
    if utils.isRunning(args.machine):
        status_msg += 'running.'
    else:
        status_msg += 'powered off.'
    print(status_msg)
elif args.action == 'start':
    utils.startVm(args.machine)
elif args.action == 'stop':
    utils.stopVm(args.machine)
elif args.action == 'restart':
    utils.restartVm(args.machine)
